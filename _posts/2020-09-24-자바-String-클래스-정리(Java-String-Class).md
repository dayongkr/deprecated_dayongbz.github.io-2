---
title: 자바 String 클래스 정리(Java String Class)
date: 2020-09-24 22:14:10 +0900
categories: [공부, 자바]
tags: [공부, 자바, java, study, 정리]
---

`String` 클래스... 솔직히 매우 간단한 부분인 줄 알았다. 하지만 관련 `메소드`, `클래스`등이 많아 거의 제일 많은 페이지를 가진 챕터였다. 물론 메소드를 모두 정리할 필요는 없어서 정리는 수월할 것 같다. 왜냐하면 어차피 메소드 존재만 알고 있으면 나중에 사용하면서 알아서 습득하게 된다. 그리고 `JS`의 `string 메소드`와 유사해서 충분히 이해가 되었다. 그래서 이번 정리 또한 처음 알게 되었거나 중요해 보였던 부분만을 간단하게 정리했습니다!

---

## 정리

### 객체의 널 체크는 필수

```java
if(str != null) {
  System.out.println(str.length());
}
```

위와 같이 객체를 처리할 때에는 `null` 체크를 하는 것이 좋다. 만약에 `null` 체크를 안 해서 `str` 객체가 `null`인 상태로 `str.length()` 코드를 실행시키면 `NullPointerException` 예외가 발생할 것이다. 그래서 `null`이 있을 수 있는 가능성이 조금이라도 있으면 널 체크가 필요하다고 한다.

### "hello" == "hello" << true | Constant Pool

```java
"hello" == "hello"; // true
```

분명히 객체를 `==`로 비교하면 얕은 비교를 해서 false가 나온다고 배웠다. 하지만 위와 같은 경우는 예외이다. 왜냐하면 자바에는 `Constant Pool`이 존재해서 객체들을 재사용하기 때문이다. 하지만 `new String("hello")` 이와 같이 String 객체를 생성하면 재사용하지 않아서 false가 나온다.

### 금지 메소드! | intern()

```java
"hello" == new String("hello").intern(); // true
```

`intern` 메소드는 문자열을 Constant Pool에서 참조하도록 바꿔준다. 그래서 위의 코드의 값이 `true`가 되는 것이다. 그래서 조심해야 할 것이 있다. 무차별적으로 `intern() `메소드를 사용하여 억지로 `Constant Pool`에 값을 할당하면 저장되는 영역은 한계가 있어서 메모리를 청소하는 단계를 거치게 된다. 이 작은 연산 하나를 빠르게 하기 위해서 한 행동 때문에 전체 자바 시스템의 성능에 악영향을 주게 된다. **그래서 꼭 사용하지 말라고 한다**.

### 불변성의 단점을 해결! | StringBuffer, StringBuilder

#### String Buffer, StringBuilder 란

`String`은 `immutable`한 객체이다. 그래서 문자열을 더하면 새로운 `String` 객체가 생성돼서 기존 객체는 버려진다. 이 같은 행동이 반복되면 쓰레기를 계속 만들어서 성능에 안 좋은 영향을 끼친다. 그래서 이러한 단점을 보안하기 위해서 `StringBuffer`, `StringBuilder`가 나왔다.

|               | 장점               | 단점        |
| :------------ | :----------------- | :---------- |
| StringBuffer  | 비교적 안전하다    | 비교적 느림 |
| StringBuilder | 비교적 덜 안전하다 | 비교적 빠름 |

#### 문자열을 더해보자! | append()

```java
StringBuilder str = new StringBulider();
str.append("hello"); // hello
str.append(" world"); // hello world
```

본론으로 돌아가서 `StringBuffer`, `StringBuilder` 클래스는 문자열을 더하더라도 새로운 객체를 생성하지 않는다. 하지만 더하는 방법이 다르다. 바로 메소드 `append()`를 사용해서 더한다. 위의 코드를 참고하면 좋을 것 같다. 참고로 JDK 5 이상에서는 String 더하기 연산을 할 경우에는 컴파일할 때 자동으로 StringBuilder로 변환해 준다고 한다. 하지만 for 루프와 같이 반복 연산을 할 때에는 자동으로 변환을 해주지 않아서 일일이 변환해주는 것이 좋다. _(만약에 까먹어도 ide가 자동으로 추전을 해준다. intellj 👍)_

#### 공통 인터페이스 CharSequence

`String`, `StringBuffer`, `StringBuilder` 이 클래스들의 공통점은 모두 `CharSequence` 인터페이스를 구현했다는 것이다. 그래서 이 세 클래스들을 이용하여 매개변수를 받는다면 `CharSequence` 타입으로 받는 것이 좋다. String 메소드들도 보면 `Charsequence`타입으로 받는 경우가 꽤 있던데 이 같은 이유로 그렇게 선언한 것 같다.

#### 어떻게 사용하면 잘 썻다고 소문날까

`StringBuilder`는 하나의 메소드 내에서 문자열을 생성하여 더할 경우에 사용하면 좋고 `StringBuffer`는 어떤 클래스에 문자열을 생성하여 더하기 위한 인스턴스 변수가 선언되었고, 여러 쓰레드에서 이 변수를 동시에 접근하는 일이 있을 경우에는 반드시 `StringBuffer`를 사용해야 한다고 한다. 아직 쓰레드에 대해서는 배우지 않아서 자세히 이해는 안 된다. 나중에 쓰레드를 배우고 보면 더 잘 이해 될 것 같다.

---

## 마치며

처음에 봤을 땐 내용이 많아서 두려웠지만 막상 공부하고 보니깐 결국 다른 언어에서도 다 있는 개념들이었다. 처음 접하는 언어였으면 솔직히 너무 어려워서 이해가 잘 안 됐을 것 같다. 정말 언어를 공부하는 것은 지치고 힘들다. 이것을 배우면 앞으로 재밌는 것들을 만들 수 있다는 것을 알기 때문에 버티는 거지 정말 재미없다. 그래도 기초가 튼튼한 개발자가 되려면 차근차근 이론도 열심히 공부해야 하기 때문에 끈기 있게 공부하고 있다. 앞으로도 파이팅이다!
